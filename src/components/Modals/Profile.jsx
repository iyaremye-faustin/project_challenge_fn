import React, { useState, useEffect } from 'react';
import useAppStore from '../store/AppStore';

const Profile = ({ user }) => {
  const [name, setName] = useState('');
  const [role, setRole] = useState('');
  const [shortName, setShortName] = useState('');
  const { loading, setLoading } = useAppStore((state) => state);

  const initUser = () => {
    setLoading(true);
    if (user) {
      setName(user.fullName);
      setRole(user.role);
    }
    setLoading(false);
  };

  useEffect(() => {
    initUser();
  }, []);

  return (
    <div className=" w-full bg-white rounded-[8px] p-4 items-start flex flex-col gap-4">
      <div className="bg-main rounded-[12px] p-3 flex flex-row gap-2 w-full">
        <div className="p-2 px-3 flex items-center justify-center bg-lightBlue rounded-[8px]">
          <h1 className="text-[18px] font-[600] text-blue"></h1>
        </div>
        <div className="flex flex-col items-start ">
          <h1 className="text-white font-[300] text-[18px]">{!loading && name}</h1>
          <span className="font-[300] text-semiText">{!loading && role}</span>
        </div>
      </div>
      <div className="flex flex-col gap-4 items-start px-3">
        <a href="#" className="flex items-center gap-2 flex-row hover:opacity-70 transition-all">
          <div>
            <svg
              width="20"
              height="20"
              viewBox="0 0 20 20"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M10 6.875C8.27411 6.875 6.875 8.27411 6.875 10C6.875 11.7259 8.27411 13.125 10 13.125C11.7259 13.125 13.125 11.7259 13.125 10C13.125 8.27411 11.7259 6.875 10 6.875ZM8.125 10C8.125 8.9645 8.9645 8.125 10 8.125C11.0355 8.125 11.875 8.9645 11.875 10C11.875 11.0355 11.0355 11.875 10 11.875C8.9645 11.875 8.125 11.0355 8.125 10Z"
                fill="#808080"
              />
              <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M10 1.04167C9.41283 1.04167 8.87658 1.203 8.29048 1.47531C7.7234 1.7388 7.06699 2.12754 6.24547 2.61405L5.6179 2.9857C4.79611 3.47235 4.13976 3.86104 3.63397 4.23287C3.11096 4.61736 2.70981 5.01093 2.41945 5.52677C2.12957 6.04179 1.99868 6.59246 1.93588 7.24589C1.87499 7.8795 1.87499 8.65542 1.875 9.63V10.37C1.87499 11.3446 1.87499 12.1205 1.93588 12.7541C1.99868 13.4076 2.12957 13.9583 2.41945 14.4733C2.70981 14.9891 3.11096 15.3827 3.63397 15.7672C4.13976 16.139 4.79611 16.5277 5.6179 17.0143L6.2455 17.386C7.06698 17.8725 7.72342 18.2613 8.29048 18.5247C8.87658 18.797 9.41283 18.9583 10 18.9583C10.5872 18.9583 11.1234 18.797 11.7095 18.5247C12.2766 18.2612 12.933 17.8725 13.7545 17.386L14.3821 17.0143C15.2038 16.5277 15.8602 16.139 16.366 15.7672C16.8891 15.3827 17.2902 14.9891 17.5806 14.4733C17.8704 13.9583 18.0013 13.4076 18.0641 12.7541C18.125 12.1205 18.125 11.3446 18.125 10.3701V9.63C18.125 8.6555 18.125 7.87949 18.0641 7.24589C18.0013 6.59246 17.8704 6.04179 17.5806 5.52677C17.2902 5.01093 16.8891 4.61736 16.366 4.23287C15.8602 3.86104 15.2039 3.47236 14.3821 2.98571L13.7545 2.61405C12.933 2.12753 12.2766 1.7388 11.7095 1.47531C11.1234 1.203 10.5872 1.04167 10 1.04167ZM6.85437 3.7062C7.71032 3.19931 8.31338 2.84301 8.81725 2.60891C9.3085 2.38064 9.65892 2.29167 10 2.29167C10.3411 2.29167 10.6915 2.38064 11.1827 2.60891C11.6866 2.84301 12.2897 3.19931 13.1457 3.7062L13.7174 4.04483C14.5732 4.55165 15.1757 4.9093 15.6257 5.24C16.0639 5.56223 16.3175 5.83122 16.4912 6.1399C16.6655 6.44941 16.7666 6.81159 16.8198 7.36546C16.8743 7.93237 16.875 8.64834 16.875 9.66142V10.3386C16.875 11.3517 16.8743 12.0677 16.8198 12.6345C16.7666 13.1884 16.6655 13.5506 16.4912 13.8601C16.3175 14.1688 16.0639 14.4378 15.6257 14.76C15.1757 15.0908 14.5732 15.4483 13.7174 15.9552L13.1457 16.2938C12.2897 16.8007 11.6866 17.157 11.1827 17.3911C10.6915 17.6193 10.3411 17.7083 10 17.7083C9.65892 17.7083 9.3085 17.6193 8.81725 17.3911C8.31338 17.157 7.71032 16.8007 6.85437 16.2938L6.28258 15.9552C5.42675 15.4483 4.82422 15.0908 4.37436 14.76C3.93605 14.4378 3.6825 14.1688 3.50875 13.8601C3.33454 13.5506 3.23338 13.1884 3.18015 12.6345C3.12567 12.0677 3.125 11.3517 3.125 10.3386V9.66142C3.125 8.64834 3.12567 7.93237 3.18015 7.36546C3.23338 6.81159 3.33454 6.44941 3.50875 6.1399C3.6825 5.83122 3.93605 5.56223 4.37436 5.24C4.82422 4.9093 5.42675 4.55165 6.28258 4.04483L6.85437 3.7062Z"
                fill="#808080"
              />
            </svg>
          </div>
          <span className="text-[18px] text-main font-[400]">Settings</span>
        </a>
        <a
          href="/logout"
          className="flex items-center gap-2 flex-row hover:opacity-70 transition-all"
        >
          <div>
            <svg
              width="20"
              height="20"
              viewBox="0 0 20 20"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M9.99998 2.70833C10.3451 2.70833 10.625 2.98815 10.625 3.33333C10.625 3.6785 10.3451 3.95833 9.99998 3.95833C6.66326 3.95833 3.95831 6.66328 3.95831 10C3.95831 13.3367 6.66326 16.0417 9.99998 16.0417C10.3451 16.0417 10.625 16.3215 10.625 16.6667C10.625 17.0118 10.3451 17.2917 9.99998 17.2917C5.97291 17.2917 2.70831 14.0271 2.70831 10C2.70831 5.97292 5.97291 2.70833 9.99998 2.70833Z"
                fill="#FD6B18"
              />
              <path
                d="M13.7247 7.94194C13.4806 7.69786 13.4806 7.30213 13.7247 7.05806C13.9688 6.81398 14.3645 6.81398 14.6086 7.05806L17.1086 9.55808C17.3526 9.80216 17.3526 10.1978 17.1086 10.4419L14.6086 12.9419C14.3645 13.186 13.9688 13.186 13.7247 12.9419C13.4806 12.6978 13.4806 12.3022 13.7247 12.0581L15.1577 10.625H8.33331C7.98814 10.625 7.70831 10.3452 7.70831 10C7.70831 9.65483 7.98814 9.375 8.33331 9.375H15.1577L13.7247 7.94194Z"
                fill="#FD6B18"
              />
            </svg>
          </div>
          <span className="text-[18px] text-orange font-[400]">Sign out</span>
        </a>
      </div>
    </div>
  );
};

export default Profile;
